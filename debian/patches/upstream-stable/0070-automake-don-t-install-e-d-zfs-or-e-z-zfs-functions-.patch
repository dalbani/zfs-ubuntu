From 96c7c63994a6c16541ad3aa4b8a0976bcfda4b0f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=D0=BD=D0=B0=D0=B1?= <nabijaczleweli@nabijaczleweli.xyz>
Date: Wed, 25 May 2022 01:25:54 +0200
Subject: [PATCH] automake: don't install /e/d/zfs or /e/z/zfs-functions +x
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Closes #13496
Backport-of: #13503
Signed-off-by: Ahelenia Ziemia≈Ñska <nabijaczleweli@nabijaczleweli.xyz>
---
 etc/default/Makefile.am | 5 +++--
 etc/zfs/Makefile.am     | 5 +++--
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/etc/default/Makefile.am b/etc/default/Makefile.am
index b88eb54949..f061692c38 100644
--- a/etc/default/Makefile.am
+++ b/etc/default/Makefile.am
@@ -1,9 +1,10 @@
 include $(top_srcdir)/config/Substfiles.am
 include $(top_srcdir)/config/Shellcheck.am
 
-initconf_SCRIPTS = zfs
+initconf_DATA = zfs
 
-SUBSTFILES += $(initconf_SCRIPTS)
+SUBSTFILES += $(initconf_DATA)
 
+SHELLCHECKSCRIPTS = $(initconf_DATA)
 SHELLCHECK_SHELL = sh
 SHELLCHECK_IGNORE = ,SC2034
diff --git a/etc/zfs/Makefile.am b/etc/zfs/Makefile.am
index 3dee81c758..1fc57e1584 100644
--- a/etc/zfs/Makefile.am
+++ b/etc/zfs/Makefile.am
@@ -10,9 +10,10 @@ dist_pkgsysconf_DATA = \
 	vdev_id.conf.multipath.example \
 	vdev_id.conf.scsi.example
 
-pkgsysconf_SCRIPTS = \
+pkgsysconf_DATA = \
 	zfs-functions
 
-SUBSTFILES += $(pkgsysconf_SCRIPTS)
+SUBSTFILES += $(pkgsysconf_DATA)
 
+SHELLCHECKSCRIPTS = $(pkgsysconf_DATA)
 SHELLCHECK_SHELL = dash # local variables
-- 
2.32.0

